<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>認証中...</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <p>認証情報を処理しています。リダイレクトしない場合は、ページを再読み込みしてください。</p>
    <script>
        // Supabaseクライアントの初期化
        // index.html と同じ認証情報を使用します
        const supabaseUrl = 'https://zflsgqzuvcnahxmthjpk.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpmbHNncXp1dmNuYWh4bXRoanBrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MTE1NzMsImV4cCI6MjA2NzA4NzU3M30.P1dLtsIorP7PoKkL97UCJ3UmIm_OQFu0NPJNmCOZV1I';
        
        try {
            const supabaseClient = supabase.createClient(supabaseUrl, supabaseAnonKey);

            // 認証状態の変化を監視
            supabaseClient.auth.onAuthStateChange((event, session) => {
                if (session) {
                    // セッションが確認できたら、サイトのルート（index.htmlがある場所）にリダイレクト
                    window.location.href = '/';
                }
            });
        } catch (e) {
            console.error("Supabaseクライアントの初期化に失敗しました: ", e.message);
            document.body.innerHTML = `<p style="color: red; font-weight: bold;">認証エラーが発生しました。Supabaseの設定を確認してください。</p>`;
        }
    </script>
</body>
</html>
